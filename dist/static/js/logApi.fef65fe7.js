(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"6UXO":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return g});var a,r=n("mXGw"),i=n("mBK0"),o=n("qgEq"),l=n("H15f"),s=n("H4M2"),c=n("fRgM"),d=n("fkL1"),u=n("GCqQ"),m=n("2//r"),p=n("Oi5Q"),f=n("J+xt");function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=o.a.Item,g=Object(i.b)("apiLogStore")(a=Object(i.c)(a=function(e){function t(){var e,n;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}(this,(e=h(t)).call.apply(e,[this].concat(i)))).state={modalTitle:"参数详情",visible:!1,modalTxt:"",visibleLog:!1,detailInfo:{}},n.columns=[{title:"ID",dataIndex:"id",sorter:!0,width:"12%"},{title:"Url",dataIndex:"url",width:"120px",render:function(e,t,a){return r.createElement("div",{onClick:function(){return n.showParamsDetail(t.url,"url")},className:"textflow-4"}," ",e," ")}},{title:"请求方式",dataIndex:"method",width:"60px"},{title:"参数",dataIndex:"params",render:function(e,t,a){return r.createElement("div",{onClick:function(){return n.showParamsDetail(t.params,"params")},className:"textflow-4"}," ",e," ")}},{title:"状态",dataIndex:"status",width:"60px",render:function(e,t,a){return r.createElement(l.a,{status:n.getStatus(e),text:e})}},{title:"创建时间",width:"120px",dataIndex:"createdAt"},{title:"耗时(ms)",dataIndex:"time",width:"60px"},{title:"操作",dataIndex:"",width:"80px",render:function(e,t,a){return r.createElement(s.a,{size:"small",type:"primary",onClick:function(){return n.viewDetail(t)}},"详情")}}],n.showParamsDetail=function(e,t){e?n.setState({modalTitle:"url"===t?"Url详情":"参数详情",visible:!n.state.visible,modalTxt:e}):n.setState({visible:!1})},n.viewDetail=function(e){e?n.setState({visibleLog:!0,detailInfo:e}):n.setState({visibleLog:!1})},n.formatHeader=function(e){var t=typeof e;if("string"!==t)return"object"===t?Object.keys(e).map(function(t){return r.createElement("div",null,t," : ",e[t])}):"";var n=JSON.parse(e);return Object.keys(n).map(function(e){return r.createElement("div",null,e," : ",n[e])})},n.wrapHtml=function(e){return null!==e&&0<Object.keys(e).length?r.createElement(r.Fragment,null,r.createElement("div",{className:"row"},r.createElement("div",null,"ID："),r.createElement("div",null,e.id)),r.createElement("div",{className:"row"},r.createElement("div",null,"IP："),r.createElement("div",null,e.ip)),r.createElement("div",{className:"row"},r.createElement("div",null,"Url："),r.createElement("div",null,e.url)),r.createElement("div",{className:"row"},r.createElement("div",null,"Path："),r.createElement("div",null,e.path)),r.createElement("div",{className:"row"},r.createElement("div",null,"参数："),r.createElement("div",null,e.params)),r.createElement("div",{className:"row"},r.createElement("div",null,"请求头："),r.createElement("div",null,n.formatHeader(e.headers))),r.createElement("div",{className:"row"},r.createElement("div",null,"响应头："),r.createElement("div",null,n.formatHeader(e.responseHeaders))),r.createElement("div",{className:"row"},r.createElement("div",null,"创建时间："),r.createElement("div",null,e.createdAt)),r.createElement("div",{className:"row"},r.createElement("div",null,"状态："),r.createElement("div",null,e.status)),r.createElement("div",{className:"row"},r.createElement("div",null,"耗时："),r.createElement("div",null,e.time,"ms"))):""},n.getStatus=function(e){var t="default";switch(e){case 200:case 201:t="success";break;case 400:case 401:case 403:case 404:case 405:case 406:t="warning";break;case 500:case 501:case 502:case 503:case 504:case 505:t="error";break;default:t="default"}return t},n}var n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r.Component),n=t,(a=[{key:"componentDidMount",value:function(){this.props.apiLogStore.search()}},{key:"render",value:function(){var e=this,t=this.state,n=t.modalTitle,a=t.visible,i=t.modalTxt,l=t.visibleLog,v=t.detailInfo,h=this.props.apiLogStore,y=h.value,g=h.loading,E=h.list,w=h.meta,C=h.inputChange,k=h.search,x=h.clear;return r.createElement(r.Fragment,null,r.createElement(c.a,{title:n,keyboard:!0,visible:a,onOk:function(){return e.showParamsDetail("")},onCancel:function(){return e.showParamsDetail("")}}," ",i," "),r.createElement(c.a,{className:"large-modal",title:"日志详情",style:{top:40},keyboard:!0,visible:l,onOk:function(){return e.viewDetail("")},onCancel:function(){return e.viewDetail("")}}," ",this.wrapHtml(v)," "),r.createElement(o.a,{className:"search-form"},r.createElement("h3",null,"API请求日志"),r.createElement(d.a,{gutter:24},r.createElement(u.a,{span:6},r.createElement(b,null,r.createElement(m.a,{placeholder:"path",onChange:function(e){return C(e.target.value,"path")},value:y.path}))),r.createElement(u.a,{span:6},r.createElement(b,null,r.createElement(m.a,{placeholder:"url",onChange:function(e){return C(e.target.value,"url")},value:y.url}))),r.createElement(u.a,{span:6},r.createElement(b,null,r.createElement(p.a.RangePicker,{onChange:function(e){return C(e,"createdAt")}}))),r.createElement(u.a,{span:6},r.createElement(b,null,r.createElement(p.a.RangePicker,null)))),r.createElement(d.a,{className:"search-btn-w"},r.createElement(u.a,{span:24},r.createElement(s.a,{onClick:x},"清空"),r.createElement(s.a,{type:"primary",onClick:k},"搜索")))),r.createElement(f.a,{bordered:!0,className:"table-list",columns:this.columns,rowKey:function(e){return e.id},dataSource:E,pagination:w,loading:g,onChange:k}))}}])&&v(n.prototype,a),t}())||a)||a},Exke:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=void 0;function r(e){if(e||void 0===a){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top=0,r.left=0,r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var i=t.offsetWidth;n.style.overflow="scroll";var o=t.offsetWidth;i===o&&(o=n.clientWidth),document.body.removeChild(n),a=i-o}return a}},rR3l:function(e,t,n){"use strict";var a=n("Kz1y"),r=n.n(a),i=n("Zv/C"),o=n.n(i),l=n("Dkg+"),s=n.n(l),c=n("Gjrs"),d=n.n(c),u=n("mXGw"),m=n("xARA"),p=n("zAXs"),f=n("p82W"),v=n("YSJY"),h=function(e){function t(){return o()(this,t),s()(this,e.apply(this,arguments))}return d()(t,e),t.prototype.shouldComponentUpdate=function(e){return!!e.hiddenClassName||!!e.visible},t.prototype.render=function(){var e=this.props.className;this.props.hiddenClassName&&!this.props.visible&&(e+=" "+this.props.hiddenClassName);var t=r()({},this.props);return delete t.hiddenClassName,delete t.visible,t.className=e,u.createElement("div",r()({},t))},t}(u.Component),y=n("Exke"),b=0,g=0;function E(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],a="scroll"+(t?"Top":"Left");if("number"!=typeof n){var r=e.document;"number"!=typeof(n=r.documentElement[a])&&(n=r.body[a])}return n}function w(e,t){var n=e.style;["Webkit","Moz","Ms","ms"].forEach(function(e){n[e+"TransformOrigin"]=t}),n.transformOrigin=t}var C=function(e){function t(){o()(this,t);var n=s()(this,e.apply(this,arguments));return n.onAnimateLeave=function(){var e=n.props.afterClose;n.wrap&&(n.wrap.style.display="none"),n.inTransition=!1,n.removeScrollingEffect(),e&&e()},n.onMaskClick=function(e){Date.now()-n.openTime<300||e.target===e.currentTarget&&n.close(e)},n.onKeyDown=function(e){var t=n.props;if(t.keyboard&&e.keyCode===p.a.ESC)return e.stopPropagation(),void n.close(e);if(t.visible&&e.keyCode===p.a.TAB){var a=document.activeElement,r=n.sentinelStart;e.shiftKey?a===r&&n.sentinelEnd.focus():a===n.sentinelEnd&&r.focus()}},n.getDialogElement=function(){var e=n.props,t=e.closable,a=e.prefixCls,i={};void 0!==e.width&&(i.width=e.width),void 0!==e.height&&(i.height=e.height);var o=void 0;e.footer&&(o=u.createElement("div",{className:a+"-footer",ref:n.saveRef("footer")},e.footer));var l=void 0;e.title&&(l=u.createElement("div",{className:a+"-header",ref:n.saveRef("header")},u.createElement("div",{className:a+"-title",id:n.titleId},e.title)));var s=void 0;t&&(s=u.createElement("button",{onClick:n.close,"aria-label":"Close",className:a+"-close"},e.closeIcon||u.createElement("span",{className:a+"-close-x"})));var c=r()({},e.style,i),d={width:0,height:0,overflow:"hidden"},m=n.getTransitionName(),p=u.createElement(h,{key:"dialog-element",role:"document",ref:n.saveRef("dialog"),style:c,className:a+" "+(e.className||""),visible:e.visible},u.createElement("div",{tabIndex:0,ref:n.saveRef("sentinelStart"),style:d},"sentinelStart"),u.createElement("div",{className:a+"-content"},s,l,u.createElement("div",r()({className:a+"-body",style:e.bodyStyle,ref:n.saveRef("body")},e.bodyProps),e.children),o),u.createElement("div",{tabIndex:0,ref:n.saveRef("sentinelEnd"),style:d},"sentinelEnd"));return u.createElement(v.a,{key:"dialog",showProp:"visible",onLeave:n.onAnimateLeave,transitionName:m,component:"",transitionAppear:!0},e.visible||!e.destroyOnClose?p:null)},n.getZIndexStyle=function(){var e={},t=n.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e},n.getWrapStyle=function(){return r()({},n.getZIndexStyle(),n.props.wrapStyle)},n.getMaskStyle=function(){return r()({},n.getZIndexStyle(),n.props.maskStyle)},n.getMaskElement=function(){var e=n.props,t=void 0;if(e.mask){var a=n.getMaskTransitionName();t=u.createElement(h,r()({style:n.getMaskStyle(),key:"mask",className:e.prefixCls+"-mask",hiddenClassName:e.prefixCls+"-mask-hidden",visible:e.visible},e.maskProps)),a&&(t=u.createElement(v.a,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:a},t))}return t},n.getMaskTransitionName=function(){var e=n.props,t=e.maskTransitionName,a=e.maskAnimation;return!t&&a&&(t=e.prefixCls+"-"+a),t},n.getTransitionName=function(){var e=n.props,t=e.transitionName,a=e.animation;return!t&&a&&(t=e.prefixCls+"-"+a),t},n.setScrollbar=function(){n.bodyIsOverflowing&&void 0!==n.scrollbarWidth&&(document.body.style.paddingRight=n.scrollbarWidth+"px")},n.addScrollingEffect=function(){1==++g&&(n.checkScrollbar(),n.setScrollbar(),document.body.style.overflow="hidden")},n.removeScrollingEffect=function(){0==--g&&(document.body.style.overflow="",n.resetScrollbar())},n.close=function(e){var t=n.props.onClose;t&&t(e)},n.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}n.bodyIsOverflowing=document.body.clientWidth<e,n.bodyIsOverflowing&&(n.scrollbarWidth=Object(y.a)())},n.resetScrollbar=function(){document.body.style.paddingRight=""},n.adjustDialog=function(){if(n.wrap&&void 0!==n.scrollbarWidth){var e=n.wrap.scrollHeight>document.documentElement.clientHeight;n.wrap.style.paddingLeft=(!n.bodyIsOverflowing&&e?n.scrollbarWidth:"")+"px",n.wrap.style.paddingRight=(n.bodyIsOverflowing&&!e?n.scrollbarWidth:"")+"px"}},n.resetAdjustments=function(){n.wrap&&(n.wrap.style.paddingLeft=n.wrap.style.paddingLeft="")},n.saveRef=function(e){return function(t){n[e]=t}},n}return d()(t,e),t.prototype.componentWillMount=function(){this.inTransition=!1,this.titleId="rcDialogTitle"+b++},t.prototype.componentDidMount=function(){this.componentDidUpdate({})},t.prototype.componentDidUpdate=function(e){var t,n,a,r,i,o=this.props,l=this.props.mousePosition;if(o.visible){if(!e.visible){this.openTime=Date.now(),this.addScrollingEffect(),this.tryFocus();var s=m.findDOMNode(this.dialog);if(l){var c=(a={left:(n=(t=s).getBoundingClientRect()).left,top:n.top},i=(r=t.ownerDocument).defaultView||r.parentWindow,a.left+=E(i),a.top+=E(i,!0),a);w(s,l.x-c.left+"px "+(l.y-c.top)+"px")}else w(s,"")}}else if(e.visible&&(this.inTransition=!0,o.mask&&this.lastOutSideFocusNode)){try{this.lastOutSideFocusNode.focus()}catch(e){this.lastOutSideFocusNode=null}this.lastOutSideFocusNode=null}},t.prototype.componentWillUnmount=function(){(this.props.visible||this.inTransition)&&this.removeScrollingEffect()},t.prototype.tryFocus=function(){Object(f.a)(this.wrap,document.activeElement)||(this.lastOutSideFocusNode=document.activeElement,this.sentinelStart.focus())},t.prototype.render=function(){var e=this.props,t=e.prefixCls,n=e.maskClosable,a=this.getWrapStyle();return e.visible&&(a.display=null),u.createElement("div",null,this.getMaskElement(),u.createElement("div",r()({tabIndex:-1,onKeyDown:this.onKeyDown,className:t+"-wrap "+(e.wrapClassName||""),ref:this.saveRef("wrap"),onClick:n?this.onMaskClick:void 0,role:"dialog","aria-labelledby":e.title?this.titleId:null,style:a},e.wrapProps),this.getDialogElement()))},t}(u.Component),k=C;C.defaultProps={className:"",mask:!0,visible:!1,keyboard:!0,closable:!0,maskClosable:!0,destroyOnClose:!1,prefixCls:"rc-dialog"};var x=n("hdnC"),N=n("LKC9"),S="createPortal"in m,O=function(e){function t(){o()(this,t);var n=s()(this,e.apply(this,arguments));return n.saveDialog=function(e){n._component=e},n.getComponent=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return u.createElement(k,r()({ref:n.saveDialog},n.props,e,{key:"dialog"}))},n.getContainer=function(){var e=document.createElement("div");return n.props.getContainer?n.props.getContainer().appendChild(e):document.body.appendChild(e),e},n}return d()(t,e),t.prototype.shouldComponentUpdate=function(e){var t=e.visible;return!(!this.props.visible&&!t)},t.prototype.componentWillUnmount=function(){S||(this.props.visible?this.renderComponent({afterClose:this.removeContainer,onClose:function(){},visible:!1}):this.removeContainer())},t.prototype.render=function(){var e=this,t=this.props.visible,n=null;return S?((t||this._component)&&(n=u.createElement(N.a,{getContainer:this.getContainer},this.getComponent())),n):u.createElement(x.a,{parent:this,visible:t,autoDestroy:!1,getComponent:this.getComponent,getContainer:this.getContainer},function(t){var n=t.renderComponent,a=t.removeContainer;return e.renderComponent=n,e.removeContainer=a,null})},t}(u.Component);O.defaultProps={visible:!1},t.a=O}}]);